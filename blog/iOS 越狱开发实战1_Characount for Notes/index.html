<!DOCTYPE html>
<html>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="功能描述：Apple Notes iOS10.2Notes编辑时在导航栏动态显示当前文本的字数。 CharacountForNotesclass-dump出MobileNotes的头文件Notes不是从AppStore下载的，没有加壳，所以可以直接使用class-dump导出头文件 12➜  ~ class-dump -S -s -H /Users/vvusu/Downloads/Reverse_">
<meta name="keywords" content="iOS">
<meta property="og:type" content="article">
<meta property="og:title" content="iOS 越狱开发实战1—Notes 显示字数">
<meta property="og:url" content="http://iiooio.com/blog/iOS 越狱开发实战1_Characount for Notes/index.html">
<meta property="og:site_name" content="iiooio">
<meta property="og:description" content="功能描述：Apple Notes iOS10.2Notes编辑时在导航栏动态显示当前文本的字数。 CharacountForNotesclass-dump出MobileNotes的头文件Notes不是从AppStore下载的，没有加壳，所以可以直接使用class-dump导出头文件 12➜  ~ class-dump -S -s -H /Users/vvusu/Downloads/Reverse_">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-04-18T14:48:20.181Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iOS 越狱开发实战1—Notes 显示字数">
<meta name="twitter:description" content="功能描述：Apple Notes iOS10.2Notes编辑时在导航栏动态显示当前文本的字数。 CharacountForNotesclass-dump出MobileNotes的头文件Notes不是从AppStore下载的，没有加壳，所以可以直接使用class-dump导出头文件 12➜  ~ class-dump -S -s -H /Users/vvusu/Downloads/Reverse_">
    
    
        
          
              <link rel="shortcut icon" href="/favicon.png">
          
        
        
          
            <link rel="icon" type="image/png" href="/favicon.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/favicon.png">
          
        
    
    <!-- title -->
    <title>iOS 越狱开发实战1—Notes 显示字数</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/wedxz">Projects</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/blog/iOS 越狱开发实战2_将指定邮件标记为已读/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/blog/iOS_内存检测/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://iiooio.com/blog/iOS 越狱开发实战1_Characount for Notes/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://iiooio.com/blog/iOS 越狱开发实战1_Characount for Notes/&text=iOS 越狱开发实战1—Notes 显示字数"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://iiooio.com/blog/iOS 越狱开发实战1_Characount for Notes/&title=iOS 越狱开发实战1—Notes 显示字数"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://iiooio.com/blog/iOS 越狱开发实战1_Characount for Notes/&is_video=false&description=iOS 越狱开发实战1—Notes 显示字数"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=iOS 越狱开发实战1—Notes 显示字数&body=Check out this article: http://iiooio.com/blog/iOS 越狱开发实战1_Characount for Notes/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://iiooio.com/blog/iOS 越狱开发实战1_Characount for Notes/&title=iOS 越狱开发实战1—Notes 显示字数"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://iiooio.com/blog/iOS 越狱开发实战1_Characount for Notes/&title=iOS 越狱开发实战1—Notes 显示字数"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://iiooio.com/blog/iOS 越狱开发实战1_Characount for Notes/&title=iOS 越狱开发实战1—Notes 显示字数"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://iiooio.com/blog/iOS 越狱开发实战1_Characount for Notes/&title=iOS 越狱开发实战1—Notes 显示字数"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://iiooio.com/blog/iOS 越狱开发实战1_Characount for Notes/&name=iOS 越狱开发实战1—Notes 显示字数&description=&lt;h4 id=&#34;功能描述：&#34;&gt;&lt;a href=&#34;#功能描述：&#34; class=&#34;headerlink&#34; title=&#34;功能描述：&#34;&gt;&lt;/a&gt;功能描述：&lt;/h4&gt;&lt;p&gt;Apple Notes iOS10.2&lt;br&gt;Notes编辑时在导航栏动态显示当前文本的字数。&lt;/p&gt;
&lt;h4 id=&#34;CharacountForNotes&#34;&gt;&lt;a href=&#34;#CharacountForNotes&#34; class=&#34;headerlink&#34; title=&#34;CharacountForNotes&#34;&gt;&lt;/a&gt;CharacountForNotes&lt;/h4&gt;&lt;h4 id=&#34;class-dump出MobileNotes的头文件&#34;&gt;&lt;a href=&#34;#class-dump出MobileNotes的头文件&#34; class=&#34;headerlink&#34; title=&#34;class-dump出MobileNotes的头文件&#34;&gt;&lt;/a&gt;class-dump出MobileNotes的头文件&lt;/h4&gt;&lt;p&gt;Notes不是从AppStore下载的，没有加壳，所以可以直接使用class-dump导出头文件&lt;/p&gt;
&lt;figure class=&#34;highlight plain&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;➜  ~ class-dump -S -s -H /Users/vvusu/Downloads/Reverse_iOS/REDemo/CountForNotes/MobileNotes -o /Users/vvusu/Downloads/Reverse_iOS/REDemo/CountForNotes/MobileNotesHeard&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2017-02-21 18:37:45.748 class-dump[71600:2785396] Warning: Parsing instance variable type failed, _cancelRenderingCount&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#功能描述："><span class="toc-number">1.</span> <span class="toc-text">功能描述：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CharacountForNotes"><span class="toc-number">2.</span> <span class="toc-text">CharacountForNotes</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#class-dump出MobileNotes的头文件"><span class="toc-number">3.</span> <span class="toc-text">class-dump出MobileNotes的头文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#用Cycript找到阅览界面及其controller"><span class="toc-number">4.</span> <span class="toc-text">用Cycript找到阅览界面及其controller</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#从ICNoteEditorViewController找到当前TextView对象"><span class="toc-number">5.</span> <span class="toc-text">从ICNoteEditorViewController找到当前TextView对象</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#到ICNoteEditorViewController-h里看看它的-定义"><span class="toc-number">5.1.</span> <span class="toc-text">到ICNoteEditorViewController.h里看看它的 定义</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#开启Debugserver"><span class="toc-number">5.2.</span> <span class="toc-text">开启Debugserver</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#LLDB连接Debugserver"><span class="toc-number">5.3.</span> <span class="toc-text">LLDB连接Debugserver</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#MobileNotes-ASLR偏移"><span class="toc-number">5.4.</span> <span class="toc-text">MobileNotes ASLR偏移</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Hopper分析"><span class="toc-number">5.5.</span> <span class="toc-text">Hopper分析</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#设置断点"><span class="toc-number">5.6.</span> <span class="toc-text">设置断点</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#创建Tweak"><span class="toc-number">6.</span> <span class="toc-text">创建Tweak</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#创建CharacountForNotes-Tweak插件"><span class="toc-number">6.1.</span> <span class="toc-text">创建CharacountForNotes Tweak插件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#control文件内容"><span class="toc-number">6.2.</span> <span class="toc-text">control文件内容</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Makefile文件内容"><span class="toc-number">6.3.</span> <span class="toc-text">Makefile文件内容</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#创建CharacountForNotes-h"><span class="toc-number">6.4.</span> <span class="toc-text">创建CharacountForNotes.h</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Tweak-xm文件内容"><span class="toc-number">6.5.</span> <span class="toc-text">Tweak.xm文件内容</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#插件测试与安装"><span class="toc-number">7.</span> <span class="toc-text">插件测试与安装</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        iOS 越狱开发实战1—Notes 显示字数
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">iiooio</span>
      </span>
      
    <div class="postdate">
        <time datetime="2017-03-20T08:38:39.000Z" itemprop="datePublished">2017-03-20</time>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/iOS/">iOS</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h4 id="功能描述："><a href="#功能描述：" class="headerlink" title="功能描述："></a>功能描述：</h4><p>Apple Notes iOS10.2<br>Notes编辑时在导航栏动态显示当前文本的字数。</p>
<h4 id="CharacountForNotes"><a href="#CharacountForNotes" class="headerlink" title="CharacountForNotes"></a>CharacountForNotes</h4><h4 id="class-dump出MobileNotes的头文件"><a href="#class-dump出MobileNotes的头文件" class="headerlink" title="class-dump出MobileNotes的头文件"></a>class-dump出MobileNotes的头文件</h4><p>Notes不是从AppStore下载的，没有加壳，所以可以直接使用class-dump导出头文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ class-dump -S -s -H /Users/vvusu/Downloads/Reverse_iOS/REDemo/CountForNotes/MobileNotes -o /Users/vvusu/Downloads/Reverse_iOS/REDemo/CountForNotes/MobileNotesHeard</span><br><span class="line">2017-02-21 18:37:45.748 class-dump[71600:2785396] Warning: Parsing instance variable type failed, _cancelRenderingCount</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h4 id="用Cycript找到阅览界面及其controller"><a href="#用Cycript找到阅览界面及其controller" class="headerlink" title="用Cycript找到阅览界面及其controller"></a>用Cycript找到阅览界面及其controller</h4><p>查找MobileNotes进程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">WSCN-6SP:~ root# ps -e |grep Applications</span><br><span class="line"> 8960 ??         0:00.45 /Applications/Maps.app/PlugIns/MapsWidget.appex/MapsWidget</span><br><span class="line"> 8990 ??         0:00.95 /Applications/BarrelSettings.app/BarrelSettings</span><br><span class="line"> 8992 ??         0:06.02 /Applications/AppStore.app/AppStore</span><br><span class="line"> 9002 ??         0:06.20 /Applications/Cydia.app/Cydia</span><br><span class="line"> 9061 ??         0:00.22 /Applications/MobileMail.app/PlugIns/MailVIPWidget.appex/MailVIPWidget</span><br><span class="line"> 9064 ??         0:02.29 /Applications/MobileMail.app/MobileMail</span><br><span class="line"> 9078 ??         0:02.47 /Applications/Preferences.app/Preferences</span><br><span class="line"> 9185 ??         0:00.93 /Applications/MobileNotes.app/MobileNotes</span><br><span class="line"> ...</span><br></pre></td></tr></table></figure>
<p>进入cycript 调试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WSCN-6SP:~ root# cycript -p MobileNotes</span><br></pre></td></tr></table></figure>
<p>打印控制器列表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cy# [[[UIWindow keyWindow] rootViewController] _printHierarchy].toString()</span><br><span class="line">`&lt;ICSplitViewController 0x1005667a0&gt;, state: appeared, view: &lt;UILayoutContainerView 0x10074ac80&gt;</span><br><span class="line">   | &lt;UIMultiColumnViewController 0x100567050&gt;, state: appeared, view: &lt;UIView 0x100574f00&gt;</span><br><span class="line">   |    | &lt;UINavigationController 0x10083f800&gt;, state: appeared, view: &lt;UILayoutContainerView 0x100753ba0&gt;</span><br><span class="line">   |    |    | &lt;ICFolderListViewController 0x100732fc0&gt;, state: disappeared, view: &lt;NotesBackgroundView 0x100757370&gt; not in the window</span><br><span class="line">   |    |    | &lt;ICModernNotesListViewController 0x100846800&gt;, state: disappeared, view: &lt;NotesBackgroundView 0x100728750&gt; not in the window</span><br><span class="line">   |    |    | &lt;UINavigationController 0x101036600&gt;, state: appeared, view: &lt;UILayoutContainerView 0x10072cc30&gt;</span><br><span class="line">   |    |    |    | &lt;ICNoteEditorViewController 0x10101b400&gt;, state: appeared, view: &lt;NotesBackgroundView 0x1005a0e70&gt;</span><br><span class="line">   |    |    |    |    | &lt;ICTextViewController 0x10059bc10&gt;, state: appeared, view: &lt;ICTextView 0x1008e3400&gt;</span><br><span class="line">   |    | &lt;UINavigationController 0x100850000&gt;, state: disappeared, view:  (view not loaded)`</span><br></pre></td></tr></table></figure>
<p>查看到<code>ICTextViewController</code>为最上层控制器，为笔记展示控制器。<br><code>ICNoteEditorViewController</code>为导航栏控制器。</p>
<p>测试修改一下NavigationController的title，发现改变了title显示,已经找到目标控制器。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cy# [#0x10101b400 setTitle:@&quot;nihao&quot;]</span><br></pre></td></tr></table></figure>
<h4 id="从ICNoteEditorViewController找到当前TextView对象"><a href="#从ICNoteEditorViewController找到当前TextView对象" class="headerlink" title="从ICNoteEditorViewController找到当前TextView对象"></a>从ICNoteEditorViewController找到当前TextView对象</h4><h5 id="到ICNoteEditorViewController-h里看看它的-定义"><a href="#到ICNoteEditorViewController-h里看看它的-定义" class="headerlink" title="到ICNoteEditorViewController.h里看看它的 定义"></a>到ICNoteEditorViewController.h里看看它的 定义</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@interface ICNoteEditorViewController : ICScrollViewDelegateViewController &lt;ICStyleSelectorDelegate, UIImagePickerControllerDelegate, UINavigationControllerDelegate, NSUserActivityDelegate, UIPopoverPresentationControllerDelegate, UIGestureRecognizerDelegate, UIViewControllerPreviewingDelegate_Private, ICAudioBarViewControllerDelegate, ICNoteEditorInputAccessoryViewDelegate, UICloudSharingControllerDelegate, ICNoteDelegate, UITextViewDelegate&gt;</span><br><span class="line">@property(retain, nonatomic) ICNote *note; // @synthesize note=_note;</span><br><span class="line">@property(readonly, nonatomic) ICTextView *textView;</span><br><span class="line">@property(retain, nonatomic) ICTextController *textController; // @synthesize textController=_textController;</span><br><span class="line"></span><br><span class="line">@property(readonly, nonatomic) double textViewBottomInsetThatWeWant;</span><br><span class="line">- (void)textViewDidBeginEditing:(id)arg1;</span><br><span class="line">- (void)textViewDidChange:(id)arg1;</span><br><span class="line">- (void)textViewDidChangeSelection:(id)arg1;</span><br><span class="line">- (void)textViewDidEndEditing:(id)arg1;</span><br><span class="line">- (id)textViewInputAccessoryView;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>查看<code>ICNoteEditorViewController</code>控制器中有实现编辑文字的代理，利用LLDB+Hopper 动态调试设置断点，点击编辑笔记时观察断点是否触发。</p>
<h5 id="开启Debugserver"><a href="#开启Debugserver" class="headerlink" title="开启Debugserver"></a>开启Debugserver</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">WSCN-6SP:~ root# debugserver *:1234 -a &quot;MobileNotes&quot;</span><br><span class="line">debugserver-@(#)PROGRAM:debugserver  PROJECT:debugserver-360.0.26.1</span><br><span class="line"> for arm64.</span><br><span class="line">Attaching to process MobileNotes...</span><br><span class="line">Listening to port 1234 for a connection from *...</span><br><span class="line">Waiting for debugger instructions for process 0.</span><br></pre></td></tr></table></figure>
<h5 id="LLDB连接Debugserver"><a href="#LLDB连接Debugserver" class="headerlink" title="LLDB连接Debugserver"></a>LLDB连接Debugserver</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ lldb</span><br><span class="line">(lldb) process connect connect://192.168.11.173:1234</span><br><span class="line">Process 8910 stopped</span><br><span class="line">* thread #1: tid = 0x7ecdf, 0x00000001882ed188 libsystem_kernel.dylib`mach_msg_trap + 8, queue = &apos;com.apple.main-thread&apos;, stop reason = signal SIGSTOP</span><br><span class="line">    frame #0: 0x00000001882ed188 libsystem_kernel.dylib`mach_msg_trap + 8</span><br><span class="line">libsystem_kernel.dylib`mach_msg_trap:</span><br><span class="line">-&gt;  0x1882ed188 &lt;+8&gt;: ret</span><br><span class="line">libsystem_kernel.dylib`mach_msg_overwrite_trap:</span><br><span class="line">    0x1882ed18c &lt;+0&gt;: movn   x16, #0x1f</span><br><span class="line">    0x1882ed190 &lt;+4&gt;: svc    #0x80</span><br><span class="line">    0x1882ed194 &lt;+8&gt;: ret</span><br><span class="line">(lldb)</span><br></pre></td></tr></table></figure>
<h5 id="MobileNotes-ASLR偏移"><a href="#MobileNotes-ASLR偏移" class="headerlink" title="MobileNotes ASLR偏移"></a>MobileNotes ASLR偏移</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(lldb) image list -o -f </span><br><span class="line">[  0] 0x00000000000e8000 /Applications/MobileNotes.app/MobileNotes(0x00000001000e8000)</span><br></pre></td></tr></table></figure>
<h5 id="Hopper分析"><a href="#Hopper分析" class="headerlink" title="Hopper分析"></a>Hopper分析</h5><p>把MobileNotes二进制文件拖入Hopper分析，在左边搜索栏中搜索<code>textViewDidChange</code>方法，找到<code>-[ICNoteEditorViewController textViewDidChange:]:</code>方法其基地址为<code>0000000100036948</code><br>偏移后地址：<code>0000000100036948</code>+<code>00000000000e8000</code> = <code>000000010011E948</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">                     -[ICNoteEditorViewController textViewDidChange:]:</span><br><span class="line">0000000100036948         stp        x28, x27, [sp, #-0x60]!                     ; Objective C Implementation defined at 0x1002bca68 (instance method), DATA XREF=0x1002bca68</span><br><span class="line">000000010003694c         stp        x26, x25, [sp, #0x10]</span><br><span class="line">0000000100036950         stp        x24, x23, [sp, #0x20]</span><br><span class="line">0000000100036954         stp        x22, x21, [sp, #0x30]</span><br><span class="line">0000000100036958         stp        x20, x19, [sp, #0x40]</span><br><span class="line">000000010003695c         stp        x29, x30, [sp, #0x50]</span><br></pre></td></tr></table></figure>
<h5 id="设置断点"><a href="#设置断点" class="headerlink" title="设置断点"></a>设置断点</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(lldb) br s -a 10011E948</span><br><span class="line">Breakpoint 1: where = MobileNotes`_mh_execute_header + 201188, address = 0x000000010011e948</span><br><span class="line">(lldb) c</span><br><span class="line">Process 7767 resuming</span><br><span class="line">Process 7767 stopped</span><br><span class="line">* thread #1: tid = 0x77054, 0x000000010011e948 MobileNotes`_mh_execute_header + 223560, queue = &apos;com.apple.main-thread&apos;, stop reason = breakpoint 1.1</span><br><span class="line">    frame #0: 0x000000010011e948 MobileNotes`_mh_execute_header + 223560</span><br><span class="line">MobileNotes`_mh_execute_header:</span><br><span class="line">-&gt;  0x10011e948 &lt;+223560&gt;: stp    x28, x27, [sp, #-96]!</span><br><span class="line">    0x10011e94c &lt;+223564&gt;: stp    x26, x25, [sp, #16]</span><br><span class="line">    0x10011e950 &lt;+223568&gt;: stp    x24, x23, [sp, #32]</span><br><span class="line">    0x10011e954 &lt;+223572&gt;: stp    x22, x21, [sp, #48]</span><br></pre></td></tr></table></figure>
<p>当编辑笔记时断点多次触发，这样可以在控制器实现代理时动态获取文本，并能获取文本的个数。</p>
<h4 id="创建Tweak"><a href="#创建Tweak" class="headerlink" title="创建Tweak"></a>创建Tweak</h4><h5 id="创建CharacountForNotes-Tweak插件"><a href="#创建CharacountForNotes-Tweak插件" class="headerlink" title="创建CharacountForNotes Tweak插件"></a>创建CharacountForNotes Tweak插件</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">➜  CharacountForNotes $THEOS/bin/nic.pl</span><br><span class="line">NIC 2.0 - New Instance Creator</span><br><span class="line">------------------------------</span><br><span class="line">  [1.] iphone/activator_event</span><br><span class="line">  [2.] iphone/application_modern</span><br><span class="line">  [3.] iphone/cydget</span><br><span class="line">  [4.] iphone/flipswitch_switch</span><br><span class="line">  [5.] iphone/framework</span><br><span class="line">  [6.] iphone/ios7_notification_center_widget</span><br><span class="line">  [7.] iphone/library</span><br><span class="line">  [8.] iphone/notification_center_widget</span><br><span class="line">  [9.] iphone/preference_bundle_modern</span><br><span class="line">  [10.] iphone/tool</span><br><span class="line">  [11.] iphone/tweak</span><br><span class="line">  [12.] iphone/xpc_service</span><br><span class="line">Choose a Template (required): 11</span><br><span class="line">Project Name (required): CharacountForNotes</span><br><span class="line">Package Name [com.yourcompany.characountfornotes]:</span><br><span class="line">Author/Maintainer Name [vvusu]:com.vvusu.characountfornotes</span><br><span class="line">[iphone/tweak] MobileSubstrate Bundle filter [com.apple.springboard]: com.apple.mobilenotes</span><br><span class="line">[iphone/tweak] List of applications to terminate upon installation (space-separated, &apos;-&apos; for none) [SpringBoard]:</span><br><span class="line">Instantiating iphone/tweak in characountfornotes/...</span><br><span class="line">Done.</span><br></pre></td></tr></table></figure>
<h5 id="control文件内容"><a href="#control文件内容" class="headerlink" title="control文件内容"></a>control文件内容</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Package: com.vvusu.characountfornotes</span><br><span class="line">Name: CharacountForNotes</span><br><span class="line">Depends: mobilesubstrate, firmware (&gt;= 9.0)</span><br><span class="line">Version: 0.0.1</span><br><span class="line">Architecture: iphoneos-arm</span><br><span class="line">Description: Add a character count to Notes</span><br><span class="line">Maintainer: vvusu</span><br><span class="line">Author: vvusu</span><br><span class="line">Section: Tweaks</span><br><span class="line">Homepage: http://blog.vvusu.com</span><br></pre></td></tr></table></figure>
<h5 id="Makefile文件内容"><a href="#Makefile文件内容" class="headerlink" title="Makefile文件内容"></a>Makefile文件内容</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">THEOS_DEVICE_IP = 192.168.11.66</span><br><span class="line">ARCHS = armv7 arm64</span><br><span class="line">TARGET = iphone:latest:9.0 </span><br><span class="line"></span><br><span class="line">include $(THEOS)/makefiles/common.mk</span><br><span class="line">TWEAK_NAME = CharacountForNotes</span><br><span class="line">CharacountForNotes_FILES = Tweak.xm</span><br><span class="line"></span><br><span class="line">include $(THEOS_MAKE_PATH)/tweak.mk</span><br><span class="line"></span><br><span class="line">after-install::</span><br><span class="line">	install.exec &quot;killall -9 SpringBoard&quot;</span><br></pre></td></tr></table></figure>
<h5 id="创建CharacountForNotes-h"><a href="#创建CharacountForNotes-h" class="headerlink" title="创建CharacountForNotes.h"></a>创建CharacountForNotes.h</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;CharacountForNotes.h&quot;</span><br><span class="line"></span><br><span class="line">@interface ICTextView : UIView</span><br><span class="line">@property (copy, nonatomic) NSString *text;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@interface ICNoteEditorViewController : UIViewController</span><br><span class="line">@property (retain, nonatomic) ICTextView *textView;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>这个头文件的所有内容均摘自类对应的头文件，构造它的目的仅仅是通过编译，避免任何报错和警告。</p>
<h5 id="Tweak-xm文件内容"><a href="#Tweak-xm文件内容" class="headerlink" title="Tweak.xm文件内容"></a>Tweak.xm文件内容</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;CharacountForNotes.h&quot;</span><br><span class="line">%hook ICNoteEditorViewController</span><br><span class="line">// Initialze title</span><br><span class="line">- (void)viewWillAppear:(BOOL)arg1 &#123;</span><br><span class="line">    %orig;</span><br><span class="line">    NSString *content = self.textView.text;</span><br><span class="line">    NSString *contentLength = [NSString stringWithFormat:@&quot;%lu&quot;, (unsigned long)[content length]];</span><br><span class="line">    self.title = contentLength;</span><br><span class="line">&#125;</span><br><span class="line">// Reset title</span><br><span class="line">- (void)viewDidDisappear:(BOOL)arg1 &#123;</span><br><span class="line">    %orig;</span><br><span class="line">    self.title = nil;</span><br><span class="line">&#125;</span><br><span class="line">// Update title</span><br><span class="line">- (void)textViewDidChange:(id)arg1 &#123;</span><br><span class="line">    %orig;</span><br><span class="line">    NSString *content = self.textView.text;</span><br><span class="line">    NSString *contentLength = [NSString stringWithFormat:@&quot;%lu&quot;, (unsigned long)[content length]];</span><br><span class="line">    self.title = contentLength;</span><br><span class="line">&#125;</span><br><span class="line">%end</span><br></pre></td></tr></table></figure>
<h4 id="插件测试与安装"><a href="#插件测试与安装" class="headerlink" title="插件测试与安装"></a>插件测试与安装</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">➜  characountfornotes make package install</span><br><span class="line">&gt; Making all for tweak CharacountForNotes…</span><br><span class="line">make[2]: Nothing to be done for `internal-library-compile&apos;.</span><br><span class="line">&gt; Making stage for tweak CharacountForNotes…</span><br><span class="line">dpkg-deb: building package &apos;com.vvusu.characountfornotes&apos; in &apos;./packages/com.vvusu.characountfornotes_0.0.1-13+debug_iphoneos-arm.deb&apos;.</span><br><span class="line">==&gt; Installing…</span><br><span class="line">(Reading database ... 4815 files and directories currently installed.)</span><br><span class="line">Preparing to unpack /tmp/_theos_install.deb ...</span><br><span class="line">Unpacking com.vvusu.characountfornotes (0.0.1-13+debug) over (0.0.1-12+debug) ...</span><br><span class="line">Setting up com.vvusu.characountfornotes (0.0.1-13+debug) ...</span><br><span class="line">install.exec &quot;killall -9 SpringBoard&quot;</span><br></pre></td></tr></table></figure>
<p>打开手机Note，开始测试。实际测试iOS9~iOS10都可以正常使用。</p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/wedxz">Projects</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#功能描述："><span class="toc-number">1.</span> <span class="toc-text">功能描述：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CharacountForNotes"><span class="toc-number">2.</span> <span class="toc-text">CharacountForNotes</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#class-dump出MobileNotes的头文件"><span class="toc-number">3.</span> <span class="toc-text">class-dump出MobileNotes的头文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#用Cycript找到阅览界面及其controller"><span class="toc-number">4.</span> <span class="toc-text">用Cycript找到阅览界面及其controller</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#从ICNoteEditorViewController找到当前TextView对象"><span class="toc-number">5.</span> <span class="toc-text">从ICNoteEditorViewController找到当前TextView对象</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#到ICNoteEditorViewController-h里看看它的-定义"><span class="toc-number">5.1.</span> <span class="toc-text">到ICNoteEditorViewController.h里看看它的 定义</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#开启Debugserver"><span class="toc-number">5.2.</span> <span class="toc-text">开启Debugserver</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#LLDB连接Debugserver"><span class="toc-number">5.3.</span> <span class="toc-text">LLDB连接Debugserver</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#MobileNotes-ASLR偏移"><span class="toc-number">5.4.</span> <span class="toc-text">MobileNotes ASLR偏移</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Hopper分析"><span class="toc-number">5.5.</span> <span class="toc-text">Hopper分析</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#设置断点"><span class="toc-number">5.6.</span> <span class="toc-text">设置断点</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#创建Tweak"><span class="toc-number">6.</span> <span class="toc-text">创建Tweak</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#创建CharacountForNotes-Tweak插件"><span class="toc-number">6.1.</span> <span class="toc-text">创建CharacountForNotes Tweak插件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#control文件内容"><span class="toc-number">6.2.</span> <span class="toc-text">control文件内容</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Makefile文件内容"><span class="toc-number">6.3.</span> <span class="toc-text">Makefile文件内容</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#创建CharacountForNotes-h"><span class="toc-number">6.4.</span> <span class="toc-text">创建CharacountForNotes.h</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Tweak-xm文件内容"><span class="toc-number">6.5.</span> <span class="toc-text">Tweak.xm文件内容</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#插件测试与安装"><span class="toc-number">7.</span> <span class="toc-text">插件测试与安装</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://iiooio.com/blog/iOS 越狱开发实战1_Characount for Notes/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://iiooio.com/blog/iOS 越狱开发实战1_Characount for Notes/&text=iOS 越狱开发实战1—Notes 显示字数"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://iiooio.com/blog/iOS 越狱开发实战1_Characount for Notes/&title=iOS 越狱开发实战1—Notes 显示字数"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://iiooio.com/blog/iOS 越狱开发实战1_Characount for Notes/&is_video=false&description=iOS 越狱开发实战1—Notes 显示字数"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=iOS 越狱开发实战1—Notes 显示字数&body=Check out this article: http://iiooio.com/blog/iOS 越狱开发实战1_Characount for Notes/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://iiooio.com/blog/iOS 越狱开发实战1_Characount for Notes/&title=iOS 越狱开发实战1—Notes 显示字数"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://iiooio.com/blog/iOS 越狱开发实战1_Characount for Notes/&title=iOS 越狱开发实战1—Notes 显示字数"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://iiooio.com/blog/iOS 越狱开发实战1_Characount for Notes/&title=iOS 越狱开发实战1—Notes 显示字数"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://iiooio.com/blog/iOS 越狱开发实战1_Characount for Notes/&title=iOS 越狱开发实战1—Notes 显示字数"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://iiooio.com/blog/iOS 越狱开发实战1_Characount for Notes/&name=iOS 越狱开发实战1—Notes 显示字数&description=&lt;h4 id=&#34;功能描述：&#34;&gt;&lt;a href=&#34;#功能描述：&#34; class=&#34;headerlink&#34; title=&#34;功能描述：&#34;&gt;&lt;/a&gt;功能描述：&lt;/h4&gt;&lt;p&gt;Apple Notes iOS10.2&lt;br&gt;Notes编辑时在导航栏动态显示当前文本的字数。&lt;/p&gt;
&lt;h4 id=&#34;CharacountForNotes&#34;&gt;&lt;a href=&#34;#CharacountForNotes&#34; class=&#34;headerlink&#34; title=&#34;CharacountForNotes&#34;&gt;&lt;/a&gt;CharacountForNotes&lt;/h4&gt;&lt;h4 id=&#34;class-dump出MobileNotes的头文件&#34;&gt;&lt;a href=&#34;#class-dump出MobileNotes的头文件&#34; class=&#34;headerlink&#34; title=&#34;class-dump出MobileNotes的头文件&#34;&gt;&lt;/a&gt;class-dump出MobileNotes的头文件&lt;/h4&gt;&lt;p&gt;Notes不是从AppStore下载的，没有加壳，所以可以直接使用class-dump导出头文件&lt;/p&gt;
&lt;figure class=&#34;highlight plain&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;➜  ~ class-dump -S -s -H /Users/vvusu/Downloads/Reverse_iOS/REDemo/CountForNotes/MobileNotes -o /Users/vvusu/Downloads/Reverse_iOS/REDemo/CountForNotes/MobileNotesHeard&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2017-02-21 18:37:45.748 class-dump[71600:2785396] Warning: Parsing instance variable type failed, _cancelRenderingCount&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2018 iiooio
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/wedxz">Projects</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/fontawesome-all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-67266460-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Baidu Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'iiooio';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


